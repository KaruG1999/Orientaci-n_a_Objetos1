# Orientación a Objetos I - Semana 2 (08-13 Septiembre)

## Modelado de Dominio y Colecciones

---

## Actividades de la Semana Anterior

- ✅ Problemas por asignación de turnos → escribir a objetos.uno@lifia.info.unlp.edu.ar
- ✅ Puesta en marcha del entorno de trabajo
- ✅ Ejercicio 1 (WallPost)
  - Testeado con los tests provistos
  - Consultado con los ayudantes

---

## Ejercicios de Esta Semana

- **Ejercicio 2:** Balanza electrónica
- **Ejercicio 3:** Presupuestos
- **Ejercicio 4:** Balanza mejorada
- **Ejercicio 5:** Inversores
- **Ejercicio 6:** Distribuidora eléctrica
- **Ejercicio 7:** Figuras y cuerpos

---

## Ejercicio 2: Balanza Electrónica

### Concepto General

- **Contexto:** Retomar la balanza del Taller de Programación con requerimientos adicionales
- **Funcionamiento:**
  - Recibe productos (uno a uno)
  - Calcula dos totales: peso total y precio total
  - Puede poner en cero todos sus valores
  - **NO guarda los productos**
  - Emite un ticket con: número de productos, peso total, precio total

### Ejemplo Visual

```
1kg $800
cantidadDeProductos: 1
precioTotal: 800
pesoTotal: 1.0
```

### Implementación

- **Proyecto:** Crear nuevo proyecto Maven llamado `balanzaElectronica`
- **Clases:** Implementar según diagrama UML proporcionado
- **Nota:** Los accessors (getters/setters) no están documentados en el diagrama pero son necesarios
- **Fechas:** Utilizar `java.time.LocalDate`
  - `LocalDate.now()` para fecha actual
  - Investigar en: https://docs.oracle.com/en/java/javase/11/docs/api/index.html

### Testing

- **Clases de prueba:** `BalanzaTest` y `ProductoTest`
- **Ubicación:** Agregar en el paquete `tests`
- **Objetivo:** Ejercitar instancia de `Balanza` y verificar comportamiento correcto

---

## Ejercicio 3: Presupuestos

### Concepto

Un presupuesto detalla precios de productos que se desean adquirir:

- Se realiza para una fecha específica
- Es solicitado por un cliente
- Proporciona visión de costos asociados

### Implementación

- **Proyecto:** Definir proyecto "Ejercicio 3 - Presupuesto"
- **Clases:** Implementar según diagrama UML
- **Herencia:** Ambas clases son subclases de `Object`

### Reflexión Importante

- **Variables de instancia:** ¿Cuáles son de cada clase?
- **Inicialización:** ¿Qué variables inicializar? ¿De qué formas?
- **Ventajas/Desventajas:** Analizar cada forma de inicialización

### Testing

- **Clases de prueba:** `ItemTest` y `PresupuestoTest`
- **Objetivo:** Confirmar funcionalidad esperada

---

## Ejercicio 4: Balanza Mejorada

### Concepto Clave

> **Aprendizaje:** Un objeto puede tener una colección de otros objetos

### Tarea 1: Recordar Productos

- **Mejora:** La balanza debe recordar los productos ingresados
- **Implementar:**

```java
public List<Producto> getProductos()
```

- **Retorna:** Todos los productos desde la última vez que se puso a cero

#### Preguntas de Reflexión:

- ¿Qué cambio produce en `ponerEnCero()`?
- ¿Es necesario almacenar los totales? ¿Se pueden obtener de otra forma?

### Tarea 2: Enriquecer el Ticket

- **Mejora:** El ticket también debe conocer los productos
- **Implementar:**

```java
public List<Producto> getProductos()
```

#### Preguntas de Reflexión:

- ¿Qué cambios son necesarios en `Ticket`?
- ¿Modifican las responsabilidades ya asignadas?
- ¿El ticket adquiere nuevas responsabilidades?

### Tarea 3: Verificación

- ¿Siguen pasando los tests después de los cambios?
- ¿Está bien que sea así?

### Apunte sobre Colecciones

- **Recurso:** Consultar apunte específico sobre uso de colecciones
- **Importancia:** Base para ejercicios posteriores

---

## Ejercicio 5: Inversores - Análisis de Dominio

### Contexto del Problema

Desarrollar aplicación móvil para que inversor conozca estado de inversiones:

- **Tipos de inversiones:**
  - Inversión en acciones
  - Inversión en plazo fijo
- **Objetivo:** Conocer valor actual de cada inversión y del total

### Cálculos de Valor Actual

#### Acciones

- **Fórmula:** valor_unitario × cantidad_acciones
- **Datos:** nombre (identificación en mercado), cantidad, valor unitario

#### Plazo Fijo

- **Fórmula:** valor_inicial + intereses_diarios (desde constitución hasta hoy)
- **Datos:** fecha constitución, monto depositado, porcentaje de interés

#### Inversor

- **Valor total:** Suma de valores actuales de todas las inversiones
- **Gestión:** Puede agregar y sacar inversiones cuando desee

### Proceso de Análisis

#### Identificación de Clases Conceptuales

##### Lista de Categorías (Recordatorio):

- Objeto físico o tangible
- Especificación de una cosa
- Lugar
- Transacción
- Roles de la gente
- Contenedor de cosas
- Cosas en un contenedor
- Otros sistemas
- Hechos
- Reglas y políticas
- Registros financieros/laborales
- Manuales, documentos

#### Principios para Identificación:

- ✅ Usar nombres del dominio del problema, no de la solución
- ✅ Omitir detalles irrelevantes
- ✅ No inventar nuevos conceptos (evitar sinónimos)
- ✅ Descubrir conceptos del mundo real

### Tareas del Ejercicio:

1. **Realizar lista de conceptos candidatos**
2. **Clasificar cada concepto** en las categorías vistas
3. **Graficar modelo de dominio** usando UML
4. **Actualizar modelo** incorporando atributos
5. **Agregar asociaciones** entre conceptos con sus categorías

---

## Ejercicio 6: Distribuidora Eléctrica

### Contexto del Problema

Distribuidora eléctrica gestiona consumos de usuarios para emisión de facturas.

#### Datos del Usuario:

- Nombre y domicilio
- Un único domicilio por usuario
- Consumos registrados en el domicilio

#### Tipos de Consumo:

##### Energía Activa:

- **Costo:** SÍ genera costo para el usuario
- **Unidad:** kWh (kilowatt/hora)

##### Energía Reactiva:

- **Costo:** NO genera costo
- **Uso:** Solo para determinar bonificaciones
- **Unidad:** kVArh (kilo voltio-amperio reactivo hora)

#### Cuadro Tarifario:

- Establece precio del kWh
- Puede ajustarse periódicamente
- Para calcular costo de energía activa

#### Facturación:

- **Base:** Solo último consumo registrado
- **Contenido de factura:**
  - Usuario a quien se cobra
  - Fecha de emisión
  - Bonificación (si aplica)
  - Monto final

#### Cálculo del Monto:

- **Costo consumo:** energía_activa × precio_kWh (del cuadro tarifario)
- **Monto final:** costo_consumo - bonificación
- **Bonificación:** Si factor de potencia estimado (fpe) > 0.8 → bonificación 10%

### Ejemplo de Análisis: Búsqueda de Sustantivos

#### Texto Analizado:

> "Una distribuidora eléctrica desea gestionar los **consumos** de sus **usuarios** para la emisión de **facturas** de cobro.
> De cada **usuario** se conoce su **nombre** y **domicilio**. Se considera que cada **usuario** sólo puede tener un único **domicilio** en donde se registran los **consumos**.
> Los **consumos** de los **usuarios** se dividen en dos componentes:
> **Consumo de energía activa**: tiene un **costo** asociado para el **usuario**. Se mide en **kWh**.
> **Consumo de energía reactiva**: no genera ningún **costo** para el **usuario**, se utiliza para determinar **bonificación**..."

#### Clasificación Propuesta:

| Categoría                       | Conceptos                                                 |
| ------------------------------- | --------------------------------------------------------- |
| Objeto físico o tangible        | -                                                         |
| Especificación de una cosa      | Nombre, domicilio                                         |
| Lugar                           | Distribuidora Eléctrica                                   |
| Transacción                     | -                                                         |
| Roles de la gente               | Usuario (cliente)                                         |
| Contenedor de cosas             | -                                                         |
| Cosas en un contenedor          | Consumo                                                   |
| Otros sistemas                  | -                                                         |
| Hechos                          | Consumo, consumo energía activa, consumo energía reactiva |
| Reglas y políticas              | (Regla De) Bonificación                                   |
| Registros financieros/laborales | Factura                                                   |
| Manuales, documentos            | Cuadro tarifario                                          |

> **AVISO:** Esta clasificación es una posible solución. Puede diferir de otras soluciones válidas.

#### Lista de Conceptos Identificados:

- Fecha, Factura, Nombre, Energía reactiva, Monto
- Cuadro tarifario, Bonificación, Distribuidora Eléctrica
- Apellido, Energía activa, Regla de Bonificación
- Cliente, Consumo

#### Modelo UML Básico:

```
Distribuidora ← Cliente
              ↙
Cliente: nombre, apellido, dirección
       ↓
Consumo: fecha, energía activa, energía reactiva
       ↓
Factura: fecha, bonificación, montoFinal
       ↑
CuadroTarifario
```

### Tareas del Ejercicio:

1. **Realizar lista de conceptos candidatos**
2. **Graficar modelo de dominio** usando UML
3. **Actualizar modelo** incorporando atributos
4. **Agregar asociaciones** entre conceptos con categorías

---

## Tipos de Asociaciones (Recordatorio)

### Categorías de Asociaciones:

- A es una **parte física** de B
- A es una **parte lógica** de B
- A está **físicamente contenido** en B
- A está **lógicamente contenido** en B
- A es una **descripción** para B
- A es un **miembro** de B
- A **usa o maneja** a B
- A se **comunica** con B
- A está **relacionado con la transacción** B
- A es **dueño** de B

---
